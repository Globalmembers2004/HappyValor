function GetDataById(a){openModalCallBack("#modalRegistro",function(){$.ajax({url:"services/usuarios/usuarios-search.php",type:"GET",dataType:"json",data:{tipobusqueda:"4",idusuario:a},success:function(a){if(a.length>0){var e=a[0].tm_foto,o=e.replace("_o","_s255");$("#hdIdUsuario").val(a[0].tm_idusuario),$("#txtNombre").val(a[0].tm_login),$("#txtNombres").val(a[0].tm_nombres),$("#txtApellidos").val(a[0].tm_apellidos),$("#txtEmail").val(a[0].tm_email),$("#txtTelefono").val(a[0].tm_telefono),$("#ddlTipoPersona").val(a[0].ta_tipopersona),$("#hdIdPersona").val(a[0].tm_idpersona),$("#ddlPerfil").val(a[0].tm_idperfil),$("#hdIdCentro").val(a[0].tm_idcentro),"no-set"!=e?setFoto(o):o="images/user-nosetimg-233.jpg",imgFoto.setAttribute("data-src",o),hdFoto.value=e,Materialize.updateTextFields()}},error:function(a){console.log(a)}})})}function GuardarDatos(){var a=new FormData,e=$("#modalRegistro :input").serializeArray(),o=fileValue;a.append("btnGuardar","btnGuardar"),a.append("hdIdEmpresa",$("#hdIdEmpresa").val()),a.append("hdIdCentro",$("#hdIdCentro").val()),a.append("hdFoto",$("#hdFoto").val()),a.append("archivo",o),Array.prototype.forEach.call(e,function(e){a.append(e.name,e.value)}),$.ajax({type:"POST",url:"services/usuarios/usuarios-post.php",cache:!1,contentType:!1,processData:!1,data:a,dataType:"json",success:function(a){createSnackbar(a.titulomsje)},error:function(a){console.log(a)}})}function LimpiarFormChangePassword(){$("#txtNewPassword").val(""),$("#txtConfirmNewPassword").val("")}function CambiarClave(){var a=new FormData,e=$("#modalChangePassword :input").serializeArray();a.append("btnCambiarClave","btnCambiarClave"),Array.prototype.forEach.call(e,function(e){a.append(e.name,e.value)}),$.ajax({url:"services/usuarios/usuarios-post.php",type:"POST",dataType:"json",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){createSnackbar(a.titulomsje),"0"!=a.rpta&&(LimpiarFormChangePassword(),closeCustomModal("#modalChangePassword"))},error:function(a){console.log(a)}})}$(function(){GetDataById($("#hdIdUsuario").val()),$("#btnEditarClave").on("click",function(a){a.preventDefault(),openCustomModal("#modalChangePassword")}),$("#btnCambiarClave").on("click",function(a){a.preventDefault(),CambiarClave()}),$("#btnGuardar").on("click",function(a){a.preventDefault(),GuardarDatos()})});var screenmode=getParameterByName("screenmode");