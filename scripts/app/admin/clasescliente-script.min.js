function Limpiar(){$("#ddlClaseDisponible")[0].selectedIndex=0,$("#hdIdRutina").val("0")}function ListarClasesSeparadas(){$.ajax({url:"services/separacionrutina/separacionrutina-search.php",type:"GET",dataType:"json",data:{tipobusqueda:"1",idempresa:$("#hdIdEmpresa").val(),idcentro:$("#hdIdCentro").val(),idcliente:getParameterByName("idcliente")},success:function(a){var e=0,i="",t=a.length;if(t>0)for(;e<t;){var n=a[e].tm_idrutinagrupal;i+='<li class="collection-item avatar no-border dato" data-idmodel="'+n+'"  data-baselement="'+selectorgrid+'">',i+='<input name="chkItem[]" type="checkbox" class="oculto" value="'+n+'" />',i+='<i class="icon-select material-icons circle white-text">done</i><div class="layer-select"></div>',i+='<span class="title descripcion">'+a[e].rutina+" ("+a[e].tm_hora_inicio+" - "+a[e].tm_hora_final+"</span>",i+='<div class="grouped-buttons place-top-right padding5">',i+='<a class="padding5 mdl-button mdl-button--icon tooltipped" href="#" data-action="more" data-delay="50" data-position="bottom" data-tooltip="M&aacute;s"><i class="material-icons md-18">&#xE5D4;</i></a>',i+='<ul class="dropdown"><li><a href="#" data-action="edit" class="waves-effect">Editar</a></li><li><a href="#" data-action="delete" class="waves-effect">Eliminar</a></li></ul>',i+="</div>",i+='<div class="divider"></div>',i+="</li>",++e}else i="A&uacute;n no se ha separado ninguna clase";$("#gvClasesSeparadas").html(i)},error:function(a){console.log(a)}})}function ListarClasesDisponibles(){$.ajax({url:"services/horariogrupal/horariogrupal-search.php",type:"GET",dataType:"json",data:{tipobusqueda:"6",idempresa:$("#hdIdEmpresa").val(),idcentro:$("#hdIdCentro").val()},success:function(a){var e=0,i="",t=a.length;if(t>0){for(;e<t;)i+='<option value="'+a[e].td_idhorariogrupal+'" data-idrutina="'+a[e].tm_idrutinagrupal+'">'+a[e].rutina+" ("+a[e].tm_hora_inicio+" - "+a[e].tm_hora_final+")</option>",++e;$("#hdIdRutina").val(a[0].tm_idrutinagrupal)}else i='<option value="0">No hay clases disponibles</option>';$("#ddlClaseDisponible").html(i)},error:function(a){console.log(a)}})}function SepararClase(){var a=new FormData;a.append("btnSepararClase","btnSepararClase"),a.append("hdIdEmpresa",$("#hdIdEmpresa").val()),a.append("hdIdCentro",$("#hdIdCentro").val()),a.append("hdIdCliente",getParameterByName("idcliente")),a.append("hdIdRutina",$("#hdIdRutina").val()),a.append("ddlClaseDisponible",$("#ddlClaseDisponible").val()),$.ajax({type:"POST",url:"services/separacionrutina/separacionrutina-post.php",cache:!1,contentType:!1,processData:!1,data:a,dataType:"json",success:function(a){createSnackbar(a.titulomsje),"0"!=a.rpta&&(Limpiar(),ListarClasesSeparadas())},error:function(a){console.log(a)}})}$(function(){ListarClasesDisponibles(),ListarClasesSeparadas(),$("#ddlClaseDisponible").on("change",function(a){a.preventDefault(),$("#hdIdRutina").val($(this).find('option[value="'+$(this).val()+'"]').attr("data-idrutina"))}),$("#btnSepararClase").on("click",function(a){a.preventDefault(),SepararClase()})});